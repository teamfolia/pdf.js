<div class="folia-page">
  <canvas class="folia-page-canvas"></canvas>
  <div class="folia-page-ui"></div>
</div>

<style>
  .folia-page {
    position: absolute;
    inset: 0;
  }

  .folia-page-canvas {
    position: absolute;
    inset: 0;
  }

  .folia-page-ui {
    position: absolute;
    inset: 0;
  }

  .annotation {
    position: absolute;
    box-sizing: border-box;
    position: absolute;
    cursor: grab;
    background-repeat: no-repeat;
    background-repeat: no-repeat;
    background-position: center;
    background-size: 100% 100%;
    --annotation-border-color: #2990ff;
    --line-width: 0px;
  }

  .annotation.no-permission {
    cursor: not-allowed;
  }

  .annotation:not(.no-permission):active {
    cursor: grabbing !important;
  }

  .annotation.selected {
    z-index: 1002;
  }

  .annotation.selected:not(.CommentAnnotation):not(.TextBoxAnnotation):not(.ArrowAnnotation)::before {
    display: block;
    content: "";
    border: solid 1px var(--annotation-border-color);
    position: absolute;
    left: -2px;
    top: -2px;
    right: -2px;
    bottom: -2px;
    z-index: -1;
  }
  .annotation.ArrowAnnotation {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .annotation.ArrowAnnotation.selected::before {
    display: block;
    content: "";
    border: solid 1px var(--annotation-border-color);
    position: absolute;
    width: var(--arrow-width);
    height: var(--arrow-height);
  }
  .annotation.TextBoxAnnotation.selected::before {
    display: block;
    content: "";
    border: solid 1px var(--annotation-border-color);
    position: absolute;
    left: -6px;
    top: -4px;
    right: -6px;
    bottom: -4px;
    z-index: -1;
  }

  .corner-div {
    display: none;
    position: absolute;
    min-width: 6px;
    max-width: 6px;
    min-height: 6px;
    max-height: 6px;
    border-radius: 6px;
    background-color: rgba(255, 255, 255);
    border: solid 1px #94a3b8;
    z-index: 2;
  }
  .corner-div.selected {
    display: block;
  }
  .source-point {
    left: -4px;
    cursor: move;
  }
  .target-point {
    right: -4px;
    cursor: move;
  }

  .annotation:not(.TextBoxAnnotation) > .corner-lt {
    left: -5px;
    top: -5px;
    cursor: nwse-resize;
  }
  .annotation:not(.TextBoxAnnotation) > .corner-rt {
    right: -5px;
    top: -5px;
    cursor: nesw-resize;
  }
  .annotation:not(.TextBoxAnnotation) > .corner-lb {
    left: -5px;
    bottom: -5px;
    cursor: nesw-resize;
  }
  .annotation:not(.TextBoxAnnotation) > .corner-rb {
    right: -5px;
    bottom: -5px;
    cursor: nwse-resize;
  }

  .annotation.TextBoxAnnotation > .corner-lt {
    left: -8.5px;
    top: -7px;
    cursor: ew-resize;
  }
  .annotation.TextBoxAnnotation > .corner-rt {
    right: -8.5px;
    top: -7px;
    cursor: ew-resize;
  }
  .annotation.TextBoxAnnotation > .corner-lb {
    left: -8.5px;
    bottom: -7px;
    cursor: default;
  }
  .annotation.TextBoxAnnotation > .corner-rb {
    right: -8.5px;
    bottom: -7px;
    cursor: default;
  }

  /** error styles */
  .annotation.InkAnnotation.error::after,
  .annotation.CircleAnnotation.error::after,
  .annotation.SquareAnnotation.error::after,
  .annotation.ArrowAnnotation.error::after,
  .annotation.HighlightAnnotation.error::after,
  .annotation.TextBoxAnnotation.error::after,
  .annotation.ImageAnnotation.error::after {
    content: "";
    display: block;
    position: absolute;
    left: 0px;
    top: 0px;
    right: 0px;
    bottom: 0px;
    border: dashed 2px red;
    background-color: rgba(255, 0, 0, 0.051);
    background-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxyZWN0IHg9IjAuNSIgeT0iMC41IiB3aWR0aD0iMjMiIGhlaWdodD0iMjMiIHJ4PSIxMS41IiBmaWxsPSIjRkNEQ0QzIi8+CiAgICA8cGF0aCBkPSJNMTkuOTA4NyAxNi45OTE3TDEyLjU4MzYgNC4zMzYwOUMxMi4zMjQzIDMuODg3OTcgMTEuNjc1OCAzLjg4Nzk3IDExLjQxNjQgNC4zMzYwOUw0LjA5MTMxIDE2Ljk5MTdDMy44MzE5IDE3LjQzOTggNC4xNTYxMiAxOCA0LjY3NDg3IDE4SDE5LjMyNTFDMTkuODQzOCAxOCAyMC4xNjgxIDE3LjQzOTggMTkuOTA4NyAxNi45OTE3Wk0xMi42NTczIDE2LjIyNTVDMTIuNjU3MyAxNi4zMDkgMTIuMzYzIDE2LjM3NjcgMTIuMDAwMSAxNi4zNzY3QzExLjYzNyAxNi4zNzY3IDExLjM0MjcgMTYuMzA5IDExLjM0MjcgMTYuMjI1NVYxNS4xNzY0QzExLjM0MjcgMTUuMDkyOCAxMS42MzcgMTUuMDI1MSAxMi4wMDAxIDE1LjAyNTFDMTIuMzYzIDE1LjAyNTEgMTIuNjU3MyAxNS4wOTI5IDEyLjY1NzMgMTUuMTc2NFYxNi4yMjU1Wk0xMi41NDc4IDEzLjc3NzdDMTIuNTQ4IDEzLjc4MDggMTIuNTQ5OCAxMy43ODM4IDEyLjU0OTggMTMuNzg3QzEyLjU0OTggMTMuOTIyNSAxMi4zMDM2IDE0LjAzMjIgMTIgMTQuMDMyMkMxMS42OTYyIDE0LjAzMjIgMTEuNDUwMiAxMy45MjI1IDExLjQ1MDIgMTMuNzg3QzExLjQ1MDIgMTMuNzgzOSAxMS40NTE5IDEzLjc4MDkgMTEuNDUyMiAxMy43Nzc3TDExLjExMDUgOS4zOTgxQzExLjExMDUgOS4yNjI2OSAxMS41MDg3IDkuMTUyOSAxMiA5LjE1MjlDMTIuNDkxMyA5LjE1MjkgMTIuODg5NSA5LjI2MjY5IDEyLjg4OTUgOS4zOTgxTDEyLjU0NzggMTMuNzc3N1oiIGZpbGw9IiNGMDRFMjMiLz4KICAgIDxyZWN0IHg9IjAuNSIgeT0iMC41IiB3aWR0aD0iMjMiIGhlaWdodD0iMjMiIHJ4PSIxMS41IiBzdHJva2U9IiNGMDRFMjMiLz4KPC9zdmc+Cg==");
    background-repeat: no-repeat;
    background-position: center;
    user-select: none;
  }
  .annotation.CommentAnnotation.error::after {
    content: "";
    position: absolute;
    right: -6px;
    bottom: -6px;
    width: 20px;
    height: 20px;
    background-image: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='8' y='6' width='3' height='9' fill='white'/%3E%3Cpath d='M17.9087 14.9917L10.5836 2.33609C10.3243 1.88797 9.67578 1.88797 9.41637 2.33609L2.09131 14.9917C1.8319 15.4398 2.15612 16 2.67487 16H17.3251C17.8438 16 18.1681 15.4398 17.9087 14.9917ZM10.6573 14.2255C10.6573 14.309 10.363 14.3767 10.0001 14.3767C9.63696 14.3767 9.34265 14.309 9.34265 14.2255V13.1764C9.34265 13.0928 9.63696 13.0251 10.0001 13.0251C10.363 13.0251 10.6573 13.0929 10.6573 13.1764V14.2255ZM10.5478 11.7777C10.548 11.7808 10.5498 11.7838 10.5498 11.787C10.5498 11.9225 10.3036 12.0322 10 12.0322C9.69625 12.0322 9.45015 11.9225 9.45015 11.787C9.45015 11.7839 9.4519 11.7809 9.45221 11.7777L9.11046 7.3981C9.11046 7.26269 9.50871 7.1529 10 7.1529C10.4913 7.1529 10.8895 7.26269 10.8895 7.3981L10.5478 11.7777Z' fill='%23F04E23' /%3E%3C/svg%3E");
    background-position: center;
    background-repeat: no-repeat;
    background-size: contain;
  }

  .annotation.TextBoxAnnotation > .text-box {
    outline: none;
    border: none;
    white-space: pre-wrap;
    word-wrap: break-word;
    overflow: hidden;
    /* background-color: rgba(255, 0, 255, 0.14); */
    /* --annotation-placeholder-color: #2990ff; */
  }

  .annotation.TextBoxAnnotation > .text-box:empty::after {
    content: attr(text-box-placeholder);
    color: #0f172a;
    opacity: 0.5;
  }

  .text-box[data-role="ROLE_OBJECT"] {
    user-select: none;
  }

  .text-box[data-role="ROLE_EDITOR"] {
    cursor: text !important;
  }

  .annotation.annotation.ImageAnnotation.no-image {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M19,19H5V5H19M19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M13.96,12.29L11.21,15.83L9.25,13.47L6.5,17H17.5L13.96,12.29Z' fill='%23f1f1f1' /%3E%3C/svg%3E");
    background-position: center;
    background-repeat: no-repeat;
    background-size: auto;
  }

  .CommentAnnotation {
    box-sizing: border-box;
    position: absolute;
    width: 36px;
    height: 36px;
    border-radius: 50% 50% 50% 0;
    border: solid 1.5px #e2e8f0;
    box-shadow: 0px 4px 6px 0px rgba(0, 0, 0, 0.1);
    cursor: pointer;

    display: flex;
    align-items: center;
    justify-content: center;

    background-color: white;
  }

  .CommentAnnotation.selected {
    border: solid 2px #334155;
  }

  .CommentAnnotation::before {
    display: none !important;
  }

  .CommentAnnotation.unread {
    background-color: #2990ff;
  }

  .user-initials {
    width: 28px;
    height: 28px;
    border-radius: 28px;
    background-color: #8cb3d5;
  }
  .user-initials::after {
    content: attr(user-initials);
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;

    font-size: 12px;
    font-family: "Inter", sans-serif;
    color: #ffffff;
  }

  @keyframes showing {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  .folia-comment {
    position: absolute;
    top: 0px;

    min-width: 300px;
    max-width: 300px;

    display: flex;
    flex-direction: column;
    align-items: center;
    border-radius: 4px;
    border: 1px solid #e2e8f0;
    background: white;
    box-shadow: 0px 8px 20px 0px rgba(0, 0, 0, 0.1);
    cursor: default;
    z-index: 2;
    animation: showing 0.2s;
  }
  .folia-comment.invisible {
    opacity: 0;
  }
  .folia-comment.right-side {
    left: 40px;
  }
  .folia-comment.left-side {
    right: 40px;
  }
</style>
